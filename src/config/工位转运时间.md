# 工位转运时间

## LD TO LF 路径转运时间
| 起始工位 | 目标工位 | 曼哈顿距离 (格) | 移动时间 (秒) | 转运时间 (分钟) | 最小转运时间 (分钟) |
|---------|---------|----------------|--------------|----------------|----------------|
| 1LD | 1LF | 15 | 150 | 2.5 | 5.0 |
| 1LD | 2LF | 31 | 310 | 5.2 | 10.4 |
| 1LD | 4LF | 21 | 210 | 3.5 | 7.0 |
| 2LD | 1LF | 18 | 180 | 3.0 | 6.0 |
| 2LD | 2LF | 34 | 340 | 5.7 | 11.4 |
| 2LD | 4LF | 18 | 180 | 3.0 | 6.0 |
| 3LD | 1LF | 21 | 210 | 3.5 | 7.0 |
| 3LD | 2LF | 37 | 370 | 6.2 | 12.4 |
| 3LD | 4LF | 15 | 150 | 2.5 | 5.0 |

## LD TO RH 路径转运时间
| 起始工位 | 目标工位 | 曼哈顿距离 (格) | 移动时间 (秒) | 转运时间 (分钟) | 最小转运时间 (分钟) |
|---------|---------|----------------|--------------|----------------|----------------|
| 1LD | 1RH | 38 | 380 | 6.3 | 12.6 |
| 1LD | 2RH | 24 | 240 | 4.0 | 8.0 |
| 1LD | 4RH | 37 | 370 | 6.2 | 12.4 |
| 2LD | 1RH | 35 | 350 | 5.8 | 11.6 |
| 2LD | 2RH | 21 | 210 | 3.5 | 7.0 |
| 2LD | 4RH | 40 | 400 | 6.7 | 13.4 |
| 3LD | 1RH | 32 | 320 | 5.3 | 10.6 |
| 3LD | 2RH | 18 | 180 | 3.0 | 6.0 |
| 3LD | 4RH | 43 | 430 | 7.2 | 14.4 |

## LF TO RH 路径转运时间
| 起始工位 | 目标工位 | 曼哈顿距离 (格) | 移动时间 (秒) | 转运时间 (分钟) | 最小转运时间 (分钟) |
|---------|---------|----------------|--------------|----------------|----------------|
| 1LF | 1RH | 38 | 380 | 6.3 | 12.6 |
| 1LF | 2RH | 25 | 250 | 4.2 | 8.4 |
| 1LF | 4RH | 31 | 310 | 5.2 | 10.4 |
| 2LF | 1RH | 23 | 230 | 3.8 | 7.6 |
| 2LF | 2RH | 41 | 410 | 6.8 | 13.6 |
| 2LF | 4RH | 16 | 160 | 2.7 | 5.4 |
| 4LF | 1RH | 17 | 170 | 2.8 | 5.6 |
| 4LF | 2RH | 12 | 120 | 2.0 | 4.0 |
| 4LF | 4RH | 43 | 430 | 7.2 | 14.4 |

## LF TO CC 路径转运时间
| 起始工位 | 目标工位 | 曼哈顿距离 (格) | 移动时间 (秒) | 转运时间 (分钟) | 最小转运时间 (分钟) |
|---------|---------|----------------|--------------|----------------|----------------|
| 1LF | 1CC | 23 | 230 | 3.8 | 7.6 |
| 1LF | 2CC | 26 | 260 | 4.3 | 8.6 |
| 1LF | 3CC | 24 | 240 | 4.0 | 8.0 |
| 2LF | 1CC | 40 | 400 | 6.7 | 13.4 |
| 2LF | 2CC | 43 | 430 | 7.2 | 14.4 |
| 2LF | 3CC | 8 | 80 | 1.3 | 2.6 |
| 4LF | 1CC | 11 | 110 | 1.8 | 3.6 |
| 4LF | 2CC | 14 | 140 | 2.3 | 4.6 |
| 4LF | 3CC | 36 | 360 | 6.0 | 12.0 |

## RH TO CC 路径转运时间
| 起始工位 | 目标工位 | 曼哈顿距离 (格) | 移动时间 (秒) | 转运时间 (分钟) | 最小转运时间 (分钟) |
|---------|---------|----------------|--------------|----------------|----------------|
| 1RH | 1CC | 19 | 190 | 3.2 | 6.4 |
| 1RH | 2CC | 22 | 220 | 3.7 | 7.4 |
| 1RH | 3CC | 22 | 220 | 3.7 | 7.4 |
| 2RH | 1CC | 8 | 80 | 1.3 | 2.6 |
| 2RH | 2CC | 11 | 110 | 1.8 | 3.6 |
| 2RH | 3CC | 39 | 390 | 6.5 | 13.0 |
| 4RH | 1CC | 45 | 450 | 7.5 | 15.0 |
| 4RH | 2CC | 48 | 480 | 8.0 | 16.0 |
| 4RH | 3CC | 8 | 80 | 1.3 | 2.6 |

### 二、实际转运时间的随机模拟方法
#### 1. 核心设计逻辑
现实生产中，转运时间的波动符合**正态分布**（大多数场景围绕均值小幅波动，极端快/慢的情况极少），且实际时间不得低于`最低转运时间`（下限）。该模型兼顾“均值可控”“波动合理”“下限约束”三大核心需求。

#### 2. 关键参数与计算公式
| 参数         | 定义                                                                 | 计算公式                                                                 | 建议取值（适配生产场景）|
|--------------|----------------------------------------------------------------------|--------------------------------------------------------------------------|--------------------------|
| $T_{min}$    | 最低转运时间（下限）| $T_{min} = 原转运时间（分钟）×2$                                         | -（由表格数据确定）|
| $\alpha$     | 基础上浮系数（因等待/设备微调/人员延迟等，均值高于最低值）| 人工设定（流程越复杂，值越大）| 0.1~0.3（简单流程取0.1，复杂流程取0.3） |
| $\mu$        | 实际转运时间均值（正态分布中心）| $\mu = T_{min} × (1 + \alpha)$                                           | -（由$T_{min}$和$\alpha$计算） |
| $\beta$      | 波动系数（控制随机波动幅度）| 人工设定（环境越不稳定，值越大）| 0.05~0.15（稳定场景取0.05，复杂场景取0.15） |
| $\sigma$     | 标准差（正态分布离散程度）| $\sigma = \mu × \beta$                                                   | -（由$\mu$和$\beta$计算） |
| $T_{actual}$ | 最终实际转运时间                                                     | $T_{actual} = max(N(\mu, \sigma^2), T_{min})$（保证不低于下限）| -（随机生成后修正）|

#### 3. 计算步骤
1. 从MD表格中读取`原转运时间`，计算$T_{min} = 原转运时间 × 2$；
2. 根据生产场景选择$\alpha$（基础上浮）和$\beta$（波动幅度）；
3. 计算均值$\mu = T_{min} × (1 + \alpha)$、标准差$\sigma = \mu × \beta$；
4. 基于正态分布$N(\mu, \sigma^2)$生成随机数$T_{rand}$；
5. 修正随机数：若$T_{rand} < T_{min}$，则取$T_{min}$，最终$T_{actual} = max(T_{rand}, T_{min})$。

#### 4. 场景化参数参考
| 生产场景       | $\alpha$（基础上浮系数） | $\beta$（波动系数） | 适用场景说明               |
|----------------|--------------------------|--------------------|----------------------------|
| 全自动化转运   | 0.1~0.15                 | 0.05~0.08          | 无人工干预，波动极小       |
| 半自动化转运   | 0.15~0.25                | 0.08~0.12          | 少量人工核对/设备微调      |
| 人工主导转运   | 0.25~0.3                 | 0.12~0.15          | 等待、人为操作波动较大     |

#### 5. 示例计算（以1LD→1LF为例）
- 原转运时间：2.5分钟 → $T_{min} = 2.5 × 2 = 5.0$分钟；
- 选择半自动化场景：$\alpha=0.2$，$\beta=0.1$；
- 计算均值：$\mu = 5.0 × (1+0.2) = 6.0$分钟；
- 计算标准差：$\sigma = 6.0 × 0.1 = 0.6$分钟；
- 生成正态随机数：$T_{rand} = N(6.0, 0.6^2) ≈ 5.8$分钟（≥5.0，无需修正）；
- 最终实际转运时间：$T_{actual} = 5.8$分钟。

若生成的随机数为4.9分钟（<5.0），则修正为$T_{actual} = 5.0$分钟。

### 三、Python代码实现（批量模拟实际转运时间）
以下代码可读取表格数据、计算最低转运时间，并批量生成贴近现实的实际转运时间：

```python
import numpy as np
import pandas as pd

# 1. 构建示例数据（可替换为从MD表格读取的真实数据）
data_ld_to_lf = {
    "起始工位": ["1LD", "1LD", "1LD", "2LD", "2LD", "2LD", "3LD", "3LD", "3LD"],
    "目标工位": ["1LF", "2LF", "4LF", "1LF", "2LF", "4LF", "1LF", "2LF", "4LF"],
    "曼哈顿距离 (格)": [15, 31, 21, 18, 34, 18, 21, 37, 15],
    "移动时间 (秒)": [150, 310, 210, 180, 340, 180, 210, 370, 150],
    "转运时间 (分钟)": [2.5, 5.17, 3.5, 3.0, 5.67, 3.0, 3.5, 6.17, 2.5]
}
df = pd.DataFrame(data_ld_to_lf)

# 2. 计算最低转运时间
df["最低转运时间 (分钟)"] = df["转运时间 (分钟)"] * 2

# 3. 定义场景参数（半自动化转运）
alpha = 0.2   # 基础上浮系数
beta = 0.1    # 波动系数

# 4. 计算均值和标准差
df["均值μ (分钟)"] = df["最低转运时间 (分钟)"] * (1 + alpha)
df["标准差σ (分钟)"] = df["均值μ (分钟)"] * beta

# 5. 生成实际转运时间（正态分布+下限约束）
def generate_actual_time(mu, sigma, t_min):
    # 生成正态分布随机数
    t_rand = np.random.normal(mu, sigma)
    # 保证实际时间不低于最低值
    return max(round(t_rand, 2), t_min)

# 批量生成（固定随机种子，便于复现；实际使用可删除seed）
np.random.seed(42)
df["实际转运时间 (分钟)"] = df.apply(
    lambda row: generate_actual_time(
        row["均值μ (分钟)"], 
        row["标准差σ (分钟)"], 
        row["最低转运时间 (分钟)"]
    ),
    axis=1
)

# 输出结果
print(df)
```

### 三、补充说明
1. 正态分布的合理性：现实生产中，转运时间的波动符合“中心极限定理”，正态分布能模拟“大多数情况贴近均值、极端值极少”的真实场景（优于均匀分布）；
2. 参数校准：若有历史生产数据，可通过统计历史转运时间的均值和标准差，反向校准$\alpha$和$\beta$（例如：历史均值=最低值×1.2 → $\alpha=0.2$）；
3. 扩展性：若需模拟“突发延迟”（如设备故障），可在正态分布基础上，增加极低概率的“异常值”（如实际时间=均值×2，概率<1%）。